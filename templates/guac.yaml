# JINJA Variables
# AMOUNT is replaced via ci.yaml with amount from globals
{% set amount = 5 %}
{% set systems = 5 %}

# USERS
users:
  {% for index in  range(1, amount+1) %}
    {% for system in range(1, systems+1) %}
  org_name.{{ index }}.user.{{ system }}:
    username: org_name.{{ index }}.user.{{ system }}
    password: vividctf
    permissions:
      connectionPermissions:
        - org_name.{{ index }}.day1.{{ system }}
        - org_name.{{ index }}.kali.{{ system }}
        - org_name.{{ index }}.analyst.{{ system }}
    {% endfor %}
  {% endfor %}

# Stacks
stacks:
  {% for index in  range(1, amount+1) %}
  - org_name.{{ index }}
  {% endfor %}

# Groups
groups:
  org_name:
    parent: ROOT
    attributes:
      max-connections: 200

# Specific Connection Templates
connectionTemplates:
  {% for system in range(1, systems+1) %}
  org_name.day1.{{ system }}:
    parent: org_name
    pattern: org_name.(\d+).day1.{{ system }}
    parameters:
      username: vividctf
      password: vividctf

  
  org_name.kali.{{ system }}:
    parent: org_name
    pattern: org_name.(\d+).kali.{{ system }}
    parameters:
      username: vividctf
      password: vividctf

  org_name.analyst.{{ system }}:
    parent: org_name
    pattern: org_name.(\d+).analyst.{{ system }}
    parameters:
      username: vividctf
      password: vividctf
  {% endfor %}

# Defaults
{% include 'def.yaml' %}