stacks:
  - playground

groups:
  playground:
    parent: ROOT
    attributes:
      max-connections: 200

connectionTemplates:
  playground.kali:
    parent: playground
    parameters:
      username: kali
      password: password
    attributes:
      guacd-hostname: guacd
  win11:
    parent: playground
    attributes:
      guacd-hostname: guacd

{% set passwords = vars | from_yaml %}
{% set amount = 10 %}

users:
  {% for index in  range(1, amount+1) %}
  playground.user.{{ index }}:
    username: playground.user.{{ index }}
    password: {{ passwords[index] }}
    permissions:
      connectionPermissions:
        - kali
  {% endfor %}


defaults:
  groups:
    type: ORGANIZATIONAL
    attributes:
      enable-session-affinity: ''
      max-connections: '50'
      max-connections-per-user: '10'

  connectionTemplates:
    protocol: rdp
    parameters:
      port: 3389
      password: fak3int3rn3t
      username: root
      security: any
      ignore-cert: 'true'
    sharingProfiles:
      - parameters:
          read-only: 'true'

  users:
    password: 'CHANGME'
    attributes: {}
      # guac-organization: cyber-range-testing
    permissions:
      systemPermissions:
        - ADMINISTER
        - CREATE_USER
        - CREATE_USER_GROUP
        - CREATE_CONNECTION
        - CREATE_CONNECTION_GROUP
        # - CREATE_SHARING_PROFILE